## demoç®€è¿°

å®ç°äº†ä¸€ä¸ªç®€å•çš„demoï¼Œè¾“å…¥è¢«è°ƒç”¨å‡½æ•°çš„è™šæ‹Ÿåœ°å€ï¼Œç„¶åè§£æå¯¹åº”çš„elfæ–‡ä»¶ï¼Œè¾“å‡ºè¯¥è™šæ‹Ÿåœ°å€å¯¹åº”çš„å‡½æ•°åç§°

- åŸºäº32ä½elfè¿›è¡Œå®ç°ï¼Œå¦‚æœæƒ³æ”¹ä¸º64ä½ä¹Ÿå¾ˆå®¹æ˜“

- ç›®å‰çš„æµ‹è¯•ç¨‹åºä¸­ï¼Œåœ°å€æ˜¯å†™æ­»ä¸ºt1çš„mainå‡½æ•°å¯¹åº”çš„è™šæ‹Ÿåœ°å€

è¿è¡Œæ•ˆæœï¼š

```bash
orange0o0@LAPTOP-8TA12ITF:~/test$ ./elf_parser t1
é¢„æœŸæ˜¯è¾“å‡ºï¼šmainï¼Œå®é™…è¾“å‡ºï¼šmain
```



- å®é™…å®ç°æ—¶ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨cæ ‡å‡†åº“çš„elf.hï¼Œä¸ç”¨åƒæºç ä¸­é‚£æ ·æ‰‹æ“å¯¹åº”çš„ç»“æ„ä½“ï¼ˆå®é™…ä¸Šæ˜¯gptå¸®æˆ‘æ“çš„å“ˆå“ˆå“ˆï¼‰
- elf.hä¸­è¿˜ä¼šæä¾›å¾ˆå¤šç›¸å…³çš„å¾ˆæœ‰ç”¨çš„å®
- åé¢çš„å›¾ç‰‡åœ¨mdè¿›è¡Œå¤åˆ¶ä¹‹åæ— æ³•æ­£å¸¸æ˜¾ç¤ºï¼Œè¯¦è§åŒçº§ç›®å½•ä¸‹çš„README.pdf

## elfå­¦ä¹ 

###### å‰è¨€&æ€»ç»“

ä¸»è¦å‚è€ƒä¸€ä»½ä¸­æ–‡æ–‡æ¡£è¿›è¡Œå­¦ä¹ ï¼Œä¸­æ–‡pdfåœ¨åŒçº§ç›®å½•ä¸‹

åšè¿™ä¸ªdemoçš„è¿‡ç¨‹ä¸­æ·±åˆ»åœ°ä½“ä¼šåˆ°äº†å¯¹é—®é¢˜è¿›è¡Œè§£è€¦çš„é‡è¦æ€§ï¼Œ==å˜æ¸…æ€è·¯å¯¹é—®é¢˜è¿›è¡Œåˆç†åœ°æ‹†åˆ†==ï¼Œå¯¹äºæ•´ä¸ªé¡¹ç›®çš„å®Œæˆå¤ªé‡è¦äº†ã€‚

äº‹å®ä¸Šï¼Œæˆ‘è®¤ä¸ºæœ€é‡è¦çš„æ­¥éª¤å°±åœ¨äºå˜æ¸…æ€è·¯ï¼Œå¹¶ä¸”æ‹†åˆ†é—®é¢˜çš„è¿™ä¸ªè¿‡ç¨‹ã€‚è¿™é¡¹ä»»åŠ¡å®Œæˆä¹‹åï¼Œåé¢æ— éå°±æ˜¯ä¸åœçš„debugäº†ã€‚æ›´ä½•å†µè¿˜æœ‰gptï¼Œå½“æˆ‘èƒ½å¤ŸæŠŠé—®é¢˜æ‹†è§£æˆä¸€ä¸ªä¸ªå°é—®é¢˜ä¹‹åï¼ˆä»¥æœ¬demoä¸ºä¾‹ï¼Œæ‹†è§£æˆä¸€ä¸ªä¸ªå°çš„å‡½æ•°ï¼Œæˆ‘åªéœ€è¦å‘Šè¯‰gptè¿™ä¸ªå‡½æ•°çš„é¢„æœŸè¾“å…¥å’Œé¢„æœŸè¾“å‡ºï¼Œgptå°±å¯ä»¥å¾ˆå‡†ç¡®åœ°ç»™å‡ºcè¯­è¨€çš„å®ç°äº†ï¼ï¼‰



ç®¡ä¸­çª¥è±¹ï¼Œä¸€ä¸ªå°demoå¦‚æ­¤ï¼Œç›¸ä¿¡ä¸€ä¸ªå¤§çš„å·¥ç¨‹é¡¹ç›®ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æˆ‘ä»¬é¦–å…ˆè¦å¯¹æ•´ä¸ªé—®é¢˜è¿›è¡Œè§£è€¦ï¼Œå¹¶ä¸”å°½é‡ç»†åŒ–ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬åœ¨æ•´ä¸ªé¡¹ç›®çš„å®ç°è¿‡ç¨‹ä¸­æ‰èƒ½å§‹ç»ˆåšåˆ°å¿ƒä¸­æœ‰æ•°ã€‚

###### ELFé™æ€ç»“æ„

- ç›®æ ‡æ–‡ä»¶/ELFæ–‡ä»¶å¯ä»¥åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼ˆunixç³»ç»Ÿï¼‰
  - relocatable file
  - shared object file 
    - å®ƒä¼šåœ¨ä¸¤ç§æƒ…å†µä¸‹è¢«ä½¿ç”¨ï¼Œç›®å‰æˆ‘å¯¹è¿™é‡Œæåˆ°çš„ä¸¤ç§çš„æƒ…å†µéƒ½ä¸æ˜¯å®Œå…¨æŒæ¡
    - ![image-20231022002033179](C:\Users\OrangeO_o\AppData\Roaming\Typora\typora-user-images\image-20231022002033179.png)
  - executable file

###### æ–‡ä»¶æ ¼å¼æ¦‚è¿°

æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼šå¯¹äºåŒä¸€ä»½äºŒè¿›åˆ¶çš„elfæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸åŒçš„è§†è§’æ¥çœ‹å¾…ã€‚è¿™é‡Œåº”è¯¥åªæ˜¯æ¶‰åŠåˆ°ä¸€ä¸ªé€»è¾‘è§†è§’çš„é—®é¢˜

---

è¿™ä¸ªæ–‡æ¡£è´¨é‡ä¸€èˆ¬ï¼Œä¸»è¦æ˜¯å®ä¾‹ä¸å¤šï¼Œæ¦‚å¿µå¤ªå¤šï¼Œæ‰€ä»¥å»æ‰¾äº†å…¶ä»–èµ„æ–™è¿›è¡Œå­¦ä¹ ã€‚

> https://www.openeuler.org/zh/blog/lijiajie128/2020-11-03-ELF%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90.html

è¯¥é“¾æ¥çš„å­¦ä¹ æ–¹å¼æ˜¯ç›´æ¥ä¸Šdemo,åŠ¨æ‰‹è·Ÿç€åšä¸€éï¼Œç†è§£ç¡®å®æ›´æ·±ã€‚

çœ‹å®Œä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å›ç­”PAä¸­çš„é—®é¢˜ï¼š

æˆ‘ä»¬å·²ç»æœ‰äº†å‡½æ•°çš„èµ·å§‹åœ°å€ï¼Œï¼ˆé€šè¿‡è§£æjarl/jalæŒ‡ä»¤å¾—åˆ°ï¼‰ï¼Œå¦‚ä½•é€šè¿‡è§£æelfæ–‡ä»¶æ¥è·å–åœ°å€å’Œå‡½æ•°åç§°ä¹‹é—´çš„æ˜ å°„å…³ç³»å‘¢ï¼Ÿ



###### demo

###### æ€»ä½“æ€è·¯

é¦–å…ˆï¼Œæˆ‘ä»¬çŸ¥é“åœ¨æ‰€æœ‰sectionä¸­ï¼Œtypeä¸ºSTRTABçš„æœ‰4ç§ï¼Œæˆ‘ä»¬éœ€è¦å…³æ³¨æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯strtblå’Œsymtblï¼Œå‰è€…å­˜å‚¨ç´¢å¼•ä¸å‡½æ•°åç§°ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œåè€…å­˜å‚¨å‡½æ•°çš„è™šæ‹Ÿåœ°å€ä¸ç´¢å¼•ä¹‹é—´çš„å…³ç³»ã€‚

ä¸‹é¢ï¼Œæˆ‘ä»¬å¦‚ä½•åˆ†åˆ«è¯»å–è¿™ä¸¤ä¸ªsectionå‘¢ï¼Ÿ

- å¯¹äºstrtblï¼š

æ€è·¯ä¸éš¾ï¼šä»¥äºŒè¿›åˆ¶æ–¹å¼è¯»å…¥elfæ–‡ä»¶ï¼Œç”±äºelf headerå›ºå®šåœ¨æ–‡ä»¶çš„èµ·å§‹ä½ç½®ï¼Œe_shstrndxå­—æ®µçš„ä½ç½®ä¹Ÿæ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ¯”è¾ƒè½»æ¾åœ°è·å¾—å…¶section indexï¼Œæ‹¿åˆ°äº†è¿™ä¸ªindexä¹‹åï¼Œç”±äºSection Header Tableï¼ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨headerç§çš„**e_shoff**æ¥è½»æ¾è®¿é—®å®ƒï¼‰æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ˆæ•°ç»„å…ƒç´ ä¸ºä¸€ä¸ªç»“æ„ä½“ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨indexæ‰¾åˆ°strtblçš„å„ç§éœ€è¦çš„ä¿¡æ¯ï¼ˆç›®å‰æ„Ÿè§‰ä¸€ä¸ªoffsetå­—æ®µå°±å¤Ÿäº†ï¼‰

> åè®°ï¼Œä½ è®°é”™äº†ï¼Œelf headerçš„e_shstrndxå­—æ®µè®°å½•çš„æ˜¯shstrtblçš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯strtblï¼è¿™å°±æ„å‘³ç€ï¼Œå’Œä¸‹é¢çš„symtblä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œéå†æ•´ä¸ªSession header Tableæ‰å¯ä»¥ï¼

> åœ¨å¯¹äºSection Header Tableè¿›è¡Œè¯»å–æ—¶ï¼Œæ³¨æ„åˆ©ç”¨**e_shentsize**å­—æ®µå’Œ**e_shnum**å­—æ®µå“¦
>
> è¿™æ—¶ï¼Œæˆ‘ä¹Ÿå°±ä½“ä¼šåˆ°äº†æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ä¸“é—¨è®¾ç½®è¿™ä¸¤ä¸ªå­—æ®µäº†hhh

- å¯¹äºsymtbl

ç”±äºelf headerä¸­å¹¶æ²¡æœ‰ç›´æ¥ç»™å‡ºsymtblçš„åœ¨Section Header Tableä¸­çš„ndxï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼¼ä¹å¿…é¡»è¦é€šè¿‡éå†çš„æ–¹å¼æ¥æ‰¾åˆ°å®ƒçš„å…·ä½“ä½ç½®ã€‚

å…·ä½“æ¥è¯´ï¼Œéå†æ•´ä¸ªSection Header Tableæ•°ç»„ï¼Œå¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬è·å–å®ƒçš„nameå­—æ®µçš„å€¼ï¼Œæ ¹æ®è¯¥indexè·å–å®é™…çš„strï¼Œç„¶ååˆ¤æ–­è¯¥stræ˜¯å¦ç­‰äºæˆ‘ä»¬é¢„æœŸçš„.symtblã€‚

è·å–åˆ°äº†symtblçš„offsetä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹è¿™ä¸ªæ•°ç»„è¿›è¡Œéå†äº†ã€‚



æ€è·¯å¤§æ¦‚ç†æ¸…æ¥šäº†ï¼Œä¸‹é¢å…ˆç”¨ä¸€ä¸ªdemoï¼Œå¹¶ä¸”å°±ä»¥è¯¥æ•™ç¨‹ä¸­æä¾›çš„ä¾‹å­æ¥è¿›è¡Œå®è·µã€‚

æˆ‘ä»¬å¸Œæœ›å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå…¶è¾“å…¥æ˜¯ä¸€ä¸ªjarl/jalçš„è™šæ‹Ÿåœ°å€ï¼Œè¾“å‡ºæ˜¯å¯¹åº”çš„å‡½æ•°åçš„å­—ç¬¦ä¸²ã€‚



åœ¨å®Œæˆè¿™ä¸ªdemoçš„è¿‡ç¨‹ä¸­å……åˆ†ä½“ä¼šåˆ°äº†ä¸€ç‚¹è½¯ä»¶å·¥ç¨‹çš„æ€æƒ³ï¼šé€æ­¥è§£è€¦ï¼ˆå˜æ¸…æ€è·¯ï¼‰ã€ä¸€ä¸ªæ¨¡å—ä¸€ä¸ªæ¨¡å—å®ç°ã€‚èºæ—‹ä¸Šå‡

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨elfInfoInitå‡½æ•°ï¼ŒæŠŠelfæ–‡ä»¶çš„å†…å®¹è¯»å–åˆ°æˆ‘ä»¬çš„å…¨å±€å˜é‡ä¸­ï¼š

å·²ç»å®ç°ï¼š

> ![image-20231022164521000](C:\Users\OrangeO_o\AppData\Roaming\Typora\typora-user-images\image-20231022164521000.png)

ä¸‹ä¸€æ­¥ï¼Œä½¿ç”¨æˆ‘ä»¬è·å–session header tableçš„ç›¸å…³ä¿¡æ¯ï¼šç›¸å…³ä»£ç å¦‚ä¸‹ï¼š

```c
//Elf32_Ehdrçš„å®šä¹‰æ˜¯å’Œæ•°æ®çš„å®é™…æ’å¸ƒæ–¹å¼ä¸€è‡´çš„ï¼Œæ‰€ä»¥ï¼ŒæŒ‰ç…§æ‰‹å†Œï¼Œç»™å‡º
	//å®Œæ•´çš„å®šä¹‰æ–¹å¼æ˜¯ä¸€ç§æ›´åŠ é«˜æ•ˆçš„æ–¹å¼ï¼
typedef struct {
    unsigned char e_ident[16]; /* ELF identification */
    __uint16_t e_type;         /* Object file type */
    __uint16_t e_machine;      /* Machine type */
    __uint32_t e_version;      /* Object file version */
    __uint32_t e_entry;        /* Entry point address */
    __uint32_t e_phoff;        /* Program header offset */
    __uint32_t e_shoff;        /* Section header offset */
    __uint32_t e_flags;        /* Processor-specific flags */
    __uint16_t e_ehsize;       /* ELF header size */
    __uint16_t e_phentsize;    /* Size of program header entry */
    __uint16_t e_phnum;        /* Number of program header entries */
    __uint16_t e_shentsize;    /* Size of section header entry */
    __uint16_t e_shnum;        /* Number of section header entries */
    __uint16_t e_shstrndx;     /* Section name string table index */
} Elf32_Ehdr;

typedef struct {
    __uint32_t sh_name;        /* Section name */
    __uint32_t sh_type;        /* Section type */
    __uint32_t sh_flags;       /* Section attributes */
    __uint32_t sh_addr;        /* Virtual address in memory */
    __uint32_t sh_offset;      /* Offset in file */
    __uint32_t sh_size;        /* Size of section */
    __uint32_t sh_link;        /* Link to related section */
    __uint32_t sh_info;        /* Miscellaneous information */
    __uint32_t sh_addralign;   /* Address alignment boundary */
    __uint32_t sh_entsize;     /* Size of entries, if section has table */
} Elf32_Shdr;

typedef struct SHTbl{
	int e_shentsize;
	int e_shnum;
	__uint64_t e_shoff;
}SHTbl;
SHTbl sh_tbl;

	//è·å–section header tableçš„ç›¸å…³ä¿¡æ¯ï¼Œå…·ä½“åŒ…æ‹¬ï¼še_shentsizeã€e_shnumã€e_shoff
bool get_sh_info(){
	Elf32_Ehdr* header = (Elf32_Ehdr*)elfInfo;

    if (header->e_shoff == 0 || header->e_shentsize == 0 || header->e_shnum == 0) {
        fprintf(stderr, "Invalid section header.\n");
        return false;
    }

    sh_tbl.e_shentsize = header->e_shentsize;
    sh_tbl.e_shnum = header->e_shnum;
    sh_tbl.e_shoff = header->e_shoff;

    return true;

}
```

ä½†æ˜¯debugå‘ç°ï¼Œå‡ºç°é—®é¢˜ï¼š

> ![image-20231022170848123](C:\Users\OrangeO_o\AppData\Roaming\Typora\typora-user-images\image-20231022170848123.png)

çŒœæµ‹æ˜¯åœ¨æ‰§è¡Œä¸‹é¢è¿™è¡Œç¨‹åºæ—¶ï¼š

```c
Elf32_Ehdr* header = (Elf32_Ehdr*)elfInfo;
```

ELFInfoå’Œheaderåœ¨å­—èŠ‚å±‚é¢æ²¡æœ‰æ­£ç¡®å¯¹åº”èµ·æ¥

äº‹å®è¯æ˜è¿™æ˜¯å¤šè™‘äº†ï¼Œå¤„ç†æœºä¼šè‡ªåŠ¨æŒ‰ç…§å°ç«¯çš„è§„åˆ™å¸®æˆ‘ä»¬å¤„ç†ï¼šå¯¹äºelfInfoçš„ä½åœ°å€çš„æ•°æ®ï¼Œè‡ªç„¶ä¹Ÿä¼šèµ‹å€¼åˆ°headerå¯¹åº”çš„å±æ€§çš„ä½åœ°å€å­—æ®µï¼Œæ‰€ä»¥ä¸æ˜¯å®ƒçš„é—®é¢˜ã€‚

å¥½å§ï¼Œå…¶å®é—®é¢˜ç¨å¾®æœ‰äº›éšæ™¦ï¼š

> ![image-20231022185123251](C:\Users\OrangeO_o\AppData\Roaming\Typora\typora-user-images\image-20231022185123251.png)

æˆ‘å½“å‰çš„elfæ–‡ä»¶æ˜¯64ä½çš„ï¼Œä½†æ˜¯æˆ‘çš„ç»“æ„ä½“æ˜¯æŒ‰ç…§32ä½è¿›è¡Œè®¾è®¡çš„ï¼

æœç„¶ï¼Œä¿®æ”¹ç»“æ„ä½“è®¾è®¡ä¹‹åï¼Œå‘ç°æ˜¯æ­£å¸¸è¿›è¡Œäº†è§£æï¼å¥½å¥½å¥½

> ![image-20231022185524117](C:\Users\OrangeO_o\AppData\Roaming\Typora\typora-user-images\image-20231022185524117.png)

ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬åˆå§‹åŒ–shstrtblçš„ç›¸å…³ä¿¡æ¯

![image-20231022195726408](C:\Users\OrangeO_o\AppData\Roaming\Typora\typora-user-images\image-20231022195726408.png)

å®è·µä¹‹åæ‰æƒ³èµ·æ¥ï¼Œæˆ‘ä»¬è¿™é‡Œçš„é¡ºåºåº”è¯¥æ˜¯å…ˆè·å¾—.shstrtblè¿™ä¸ªsectionçš„ç›¸å…³ä¿¡æ¯ï¼ˆä½ é—®æˆ‘ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæ‰‹å†Œæ˜¯è¿™æ ·å†™çš„ï¼‰

> ä½ ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œç”±äºä¸€å¼€å§‹å¯¹ä»»åŠ¡çš„è§£è€¦ä¸å¤Ÿå½»åº•ï¼Œå…·ä½“æ¥è¯´ï¼Œåˆ°äº†demoçš„ä¸­æœŸè¿˜æ˜¯ä¼šè§‰å¾—æœ‰ç‚¹è¿·èŒ«ï¼Œå°±ï¼Œä¸çŸ¥é“å½“å‰åœ¨åšçš„äº‹æƒ…åœ¨æ•´ä¸ªdemoçš„å®ç°ä¸­æœ‰ä½•ä½œ

ä¸‹é¢é¦–å…ˆå®ç°ä¸€ä¸ªå‡½æ•°ï¼šfindByName

å‡½æ•°æºç å¦‚ä¸‹ï¼š

```c
Elf64_Shdr* findByName(char* name) {
    // è·å–å­—ç¬¦ä¸²è¡¨çš„èµ·å§‹åœ°å€
    char* strTab = (char*)&elfInfo[shstrtbl->sh_offset];
    // éå†æ‰€æœ‰ section headers
    for(int i = 0; i < sh_tbl.e_shnum; i++) {
        Elf64_Shdr* shdr = (Elf64_Shdr*)&elfInfo[sh_tbl.e_shoff + i * sh_tbl.e_shentsize];
        char* secName = &strTab[shdr->sh_name];
        
        // æ¯”è¾ƒ section çš„åå­—å’Œè¾“å…¥çš„åå­—
        if(strcmp(secName, name) == 0) {
            return shdr;
        }
    }
    // å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„ sectionï¼Œè¿”å› NULL
    return NULL;
}
```

> è¾“å…¥ï¼šå·²çŸ¥çš„session nameï¼Œè¾“å‡ºè¯¥sessionçš„ç›¸å…³ä¿¡æ¯(è¿”å›ç±»å‹ä¸ºElf64_Shdr*)

> ![image-20231022202249129](C:\Users\OrangeO_o\AppData\Roaming\Typora\typora-user-images\image-20231022202249129.png)

åœ¨æœ‰äº†findByNameè¿™ä¸ªå¼ºå¤§çš„å·¥å…·ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è½»æ¾åœ°è·å¾—strtabã€symtabçš„ç›¸å…³ä¿¡æ¯äº†ï¼

ä¸‹é¢ï¼Œæˆ‘ä»¬ä¼¼ä¹å·²ç»ä¸çŸ¥ä¸è§‰é—´è¿›å…¥æ”¶å°¾å·¥ä½œäº†ï¼æˆ‘ä»¬æ•´ä¸ªdemoçš„è¾“å…¥ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°çš„é€»è¾‘åœ°å€ï¼Œæˆ‘ä»¬åªéœ€è¦éå†symtabè¿™ä¸ªsectionï¼Œè·å–åˆ°å®ƒçš„nameå­—æ®µï¼Œç„¶åå†åˆ©ç”¨strtabè¿™ä¸ªsectionï¼Œè·å–åˆ°å®é™…çš„å­—ç¬¦ä¸²ï¼Œå°±å¯ä»¥å®Œæˆæ•´ä¸ªdemoäº†ï¼

æœ€åï¼Œæˆ‘ä»¬ç»™å‡ºgetFunNameçš„å®ç°ï¼š

> ![image-20231022204825577](C:\Users\OrangeO_o\AppData\Roaming\Typora\typora-user-images\image-20231022204825577.png)

ç”±æ­¤ï¼Œè¿›ä¸€æ­¥åŠ æ·±äº†æˆ‘ä»¬å¯¹äºsectionçš„è®¤çŸ¥ï¼Œè¯»å–ä¸åŒçš„sectionï¼Œæˆ‘ä»¬æ‰€éœ€è¦çš„è¯»å–æ–¹å¼éƒ½ä¸ä¸€æ ·ï¼Œå°±ä»¥ä¸Šé¢çš„ä¸¤ä¸ªæ¡†æ¡†ä¹‹å¤„çš„sectionä¸ºä¾‹ï¼š

strTabï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨ä¸€ä¸ªchar*æ¥è®°å½•ä¸€ä¸‹å³å¯ï¼Œå®é™…ä½¿ç”¨æ—¶ï¼Œå°±æ˜¯åƒéå†ä¸­çš„é‚£æ ·ï¼ŒstrTab[symbol->st_name]å³å¯è®¿é—®è¿™ä¸ªsectionä¸­çš„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ï¼ŒsymTabå°±ä¸ä¸€æ ·äº†ï¼Œæˆ‘ä»¬ç”šè‡³éœ€è¦ä¸ºè¿™ä¸ªsectionå•ç‹¬å†™ä¸€ä¸ªç»“æ„ä½“æ¥å­˜å‚¨å…¶å¯¹åº”çš„ä¿¡æ¯ã€‚



> å†™åˆ°è¿™é‡Œï¼Œæˆ‘æœ‰åº•æ°”è¯´ï¼Œç»™æˆ‘è¶³å¤Ÿçš„æ—¶é—´ã€å®Œæ•´çš„æ‰‹å†Œï¼Œæˆ‘ä¹Ÿå¯ä»¥å®ç°ä¸€ä¸ªå®Œæ•´çš„`readelf`å·¥å…·ï¼ğŸ™ŒğŸ™ŒğŸ™ŒğŸ™ŒğŸ˜ğŸ˜ğŸ˜ğŸ˜

ç»§ç»­ä½¿ç”¨t1è¿›è¡Œæµ‹è¯•ï¼Œç»“æœå¾ˆæ£’ï¼Œåœ†æ»¡å®Œæˆï¼

> ![image-20231022211723876](C:\Users\OrangeO_o\AppData\Roaming\Typora\typora-user-images\image-20231022211723876.png)

